<!--

    Implement Calculator ctor, that creates extendable calc objects.
    By default Calculator supports "+" and "-" (line 24 and 25)

    Extend functionality with addOperation operation to add new functions (line 27 and 28).

-->

<html>
<head>
    <title></title>
</head>
<body>
    <script>

        // Constructor of Calculator type
        function Calculator() {
            this.operations = {
                "+": function(a,b){return a+b;},
                "-": function(a,b){return a-b;}
            };
            this.addOperation = function(operator,operationFunction){
                this.operations[operator] = operationFunction;
            };
            this.calculate = function(expression) {
            var tokens = expression.match(/\S+/g); 
            var operand1 = parseFloat(tokens[0]);
            var operator = tokens[1];
            var operand2 = parseFloat(tokens[2]);

         if (isNaN(operand1) || isNaN(operand2) || !this.operations.hasOwnProperty(operator)) {
             return "Invalid expression or operation not supported.";
         }

             var operation = this.operations[operator];
             return operation(operand1, operand2);
};

        }

        var calc = new Calculator();

        alert(calc.calculate("3 + 7")); // output 10
        alert(calc.calculate("7 - 3")); // output 4

         calc.addOperation("*", function (a, b) { return a * b; });
         calc.addOperation("/", function (a, b) { return a / b; });

         alert(calc.calculate("3 * 7")); // output 21
         alert(calc.calculate("8 / 0")); // output infinity ???????
         alert(calc.calculate("8 / 4")); // output 2
    </script>
</body>
</html>